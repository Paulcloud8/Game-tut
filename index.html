<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEZ Balancer: Indonesia</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for aesthetic */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1f2937 0%, #000000 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .game-container {
            max-width: 900px;
            width: 95%;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            animation: fadeIn 1s ease-out;
        }
        .stat-bar-bg {
            background-color: #4b5563;
        }
        .stat-bar-fill-economic {
            transition: width 0.5s ease-in-out;
            background-color: #10b981; /* Green for economic gain */
        }
        .stat-bar-fill-social {
            transition: width 0.5s ease-in-out;
            background-color: #f59e0b; /* Amber for social/trust */
        }
        .btn-decision {
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .btn-decision:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        .btn-decision:active {
            transform: translateY(0);
            box-shadow: none;
        }
        .message-box {
            animation: slideDown 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <script>
        // Game State Variables
        let state = {
            turn: 1,
            maxTurns: 10,
            economicOutput: 50, // Max 100
            publicTrust: 50, // Max 100
            capital: 100,
            isGameRunning: true
        };

        const DECISIONS = [
            {
                // Based on Mekong Dispossession - Land Acquisition/Compensation Trade-off
                title: "Land Acquisition Strategy",
                prompt: "Your SEZ needs 500 Hectares, requiring displacement of a local community. How do you handle compensation?",
                options: [
                    {
                        text: "Fast-Track Displacement: Minimal, quick compensation to save time and capital.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 15,
                            publicTrust: s.publicTrust - 20,
                            capital: s.capital + 50,
                            message: "The rapid land clearance attracted foreign investors (+15 Output, +50 Capital), but the low compensation has severely damaged Public Trust (-20 Trust)."
                        })
                    },
                    {
                        text: "Community Investment: Fair market price plus investment in new local schools and housing.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 5,
                            publicTrust: s.publicTrust + 10,
                            capital: s.capital - 40,
                            message: "The community partnership secured social license (+10 Trust). Development is slower and costlier (-40 Capital), but sustainable (+5 Output)."
                        })
                    }
                ]
            },
            {
                // Based on Vietnam SEZ - FDI/Labor Market Quality Trade-off
                title: "Foreign Direct Investment (FDI) Conditions",
                prompt: "A large Taiwanese manufacturer is interested. They demand minimal regulation. What do you prioritize?",
                options: [
                    {
                        text: "Maximize FDI: Offer deep tax breaks and ignore demands for strong labor monitoring.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 20,
                            publicTrust: s.publicTrust - 15,
                            capital: s.capital + 20,
                            message: "FDI surged, boosting Economic Output (+20). However, reports of poor labor conditions have created public outrage (-15 Trust)."
                        })
                    },
                    {
                        text: "Sustainable FDI: Enforce strict labor standards and formal contracts, using some capital for oversight.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 10,
                            publicTrust: s.publicTrust + 5,
                            capital: s.capital - 25,
                            message: "The SEZ's reputation for quality labor has increased Trust (+5). Output growth is moderate (+10), but capital was spent on formalizing contracts (-25 Capital)."
                        })
                    }
                ]
            },
            {
                // Based on Vietnam SEZ - Structural Change and Informality Spillover Trade-off
                title: "Local Labor Market Transition",
                prompt: "The SEZ is pulling young workers from surrounding villages, leading to informality and agricultural decline outside the zone. How do you respond?",
                options: [
                    {
                        text: "SEZ First: Focus resources only on manufacturing within the zone. Allow market forces to manage the transition.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 15,
                            publicTrust: s.publicTrust - 15,
                            capital: s.capital + 0,
                            message: "Pure market focus accelerated industrial growth (+15 Output). The resulting social dislocation and non-SEZ informality have severely hurt Public Trust (-15 Trust)."
                        })
                    },
                    {
                        text: "Community Uplift: Invest capital in vocational training and agricultural modernization programs for surrounding villages.",
                        effect: (s) => ({
                            economicOutput: s.economicOutput + 5,
                            publicTrust: s.publicTrust + 10,
                            capital: s.capital - 30,
                            message: "Training programs are easing the structural change and mitigating informality (+10 Trust). This is a heavy capital expense (-30 Capital) but provides slow, steady output growth (+5 Output)."
                        })
                    }
                ]
            }
        ];

        // Utility function to clamp a value between 0 and 100
        const clamp = (num) => Math.min(100, Math.max(0, num));

        // Function to update the game state and UI
        function updateGame(decisionIndex, optionIndex) {
            if (!state.isGameRunning) return;

            const decision = DECISIONS[decisionIndex];
            const option = decision.options[optionIndex];
            const result = option.effect(state);

            // Apply effects
            state.economicOutput = clamp(result.economicOutput);
            state.publicTrust = clamp(result.publicTrust);
            state.capital = result.capital;
            state.turn++;

            // Display message
            document.getElementById('message-box').innerHTML = result.message;
            document.getElementById('message-box').classList.remove('hidden');

            // Check for game over or win condition
            if (state.publicTrust <= 0) {
                endGame(false, "MASSIVE PUBLIC PROTESTS! The SEZ project is suspended due to political instability and land rights disputes.");
            } else if (state.capital <= 0) {
                 endGame(false, "BANKRUPTCY! You ran out of Capital. Without funds for operations or infrastructure, the project has collapsed.");
            } else if (state.turn > state.maxTurns) {
                endGame(true, "VICTORY! You successfully completed 10 years of SEZ development. The final balance determines your success.");
            } else {
                renderUI();
            }
        }

        // Function to end the game
        function endGame(isWin, finalMessage) {
            state.isGameRunning = false;
            let finalScore = state.economicOutput + state.publicTrust;

            let endingText = "";
            if (isWin) {
                endingText = `SEZ PROJECT COMPLETE. Your final combined score is ${finalScore}.`;
                if (state.economicOutput > 80 && state.publicTrust > 80) {
                    endingText += " (Exceptional Success! A global model for balanced development.)";
                } else if (state.economicOutput > 90 && state.publicTrust < 50) {
                    endingText += " (Economic Giant, Social Disaster. Rapid growth came at the cost of the people.)";
                } else if (state.economicOutput < 50 && state.publicTrust > 90) {
                    endingText += " (Social Success, Economic Failure. You satisfied the community but failed to attract core investment.)";
                } else {
                    endingText += " (Balanced Success. You achieved solid growth while maintaining public confidence.)";
                }
            } else {
                 endingText = `GAME OVER. ${finalMessage} Final Score: ${finalScore}.`;
            }

            document.getElementById('game-content').innerHTML = `
                <div class="text-center p-8 bg-gray-700 rounded-xl">
                    <h2 class="text-3xl font-bold mb-4 text-white">${isWin ? 'TUTORIAL COMPLETE' : 'PROJECT FAILED'}</h2>
                    <p class="text-lg mb-6 text-gray-300">${finalMessage}</p>
                    <p class="text-2xl font-extrabold mb-8 text-yellow-400">${endingText}</p>
                    <button onclick="resetGame()" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-lg">Start New Game</button>
                </div>
            `;
        }

        // Function to reset the game
        function resetGame() {
            state = {
                turn: 1,
                maxTurns: 10,
                economicOutput: 50,
                publicTrust: 50,
                capital: 100,
                isGameRunning: true
            };
            document.getElementById('message-box').classList.add('hidden');
            renderUI();
        }

        // Function to render the UI based on current state
        function renderUI() {
            const container = document.getElementById('game-content');
            const currentDecisionIndex = (state.turn - 1) % DECISIONS.length;
            const currentDecision = DECISIONS[currentDecisionIndex];

            // Render stats panel
            document.getElementById('turn-counter').innerText = `${state.turn} / ${state.maxTurns}`;
            document.getElementById('capital-value').innerText = `Rp ${state.capital} M`;
            document.getElementById('economic-bar-fill').style.width = `${state.economicOutput}%`;
            document.getElementById('economic-bar-value').innerText = `${state.economicOutput}`;
            document.getElementById('social-bar-fill').style.width = `${state.publicTrust}%`;
            document.getElementById('social-bar-value').innerText = `${state.publicTrust}`;

            // Render decision panel
            let decisionHTML = `
                <h3 class="text-xl font-bold mb-4 text-white">${currentDecision.title}</h3>
                <p class="mb-6 text-gray-300">${currentDecision.prompt}</p>
                <div class="space-y-4">
            `;

            currentDecision.options.forEach((option, index) => {
                decisionHTML += `
                    <button 
                        onclick="updateGame(${currentDecisionIndex}, ${index})" 
                        class="btn-decision w-full text-left p-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg shadow-md border border-gray-600"
                    >
                        ${option.text}
                    </button>
                `;
            });

            decisionHTML += `</div>`;
            container.innerHTML = decisionHTML;
        }

        // Initialize game on load
        window.onload = resetGame;
    </script>
</head>
<body>

    <div class="game-container bg-gray-900 rounded-xl p-6 md:p-10 border-4 border-yellow-500">
        <h1 class="text-3xl font-extrabold text-center mb-6 text-yellow-400 uppercase tracking-wider">
            SEZ Balancer: Indonesia
        </h1>
        <p class="text-center text-gray-400 mb-6">
            **Trade-off Challenge:** Balance Economic Output (FDI/Factories) and Public Trust (Land Rights/Compensation) over 10 turns.
        </p>

        <!-- Stats Panel -->
        <div class="grid grid-cols-3 gap-4 mb-8 p-4 bg-gray-800 rounded-lg">
            <div class="text-center">
                <p class="text-sm font-semibold text-gray-400">TURN</p>
                <p id="turn-counter" class="text-3xl font-bold text-white">1 / 10</p>
            </div>
            <div class="text-center">
                <p class="text-sm font-semibold text-gray-400">CAPITAL (Rp)</p>
                <p id="capital-value" class="text-3xl font-bold text-indigo-400">Rp 100 M</p>
            </div>
            <div class="text-center">
                <p class="text-sm font-semibold text-gray-400">SEZ GOAL</p>
                <p class="text-3xl font-bold text-gray-200">Balanced Growth</p>
            </div>
        </div>

        <!-- Metric Bars -->
        <div class="space-y-4 mb-8">
            <div>
                <div class="flex justify-between items-center mb-1">
                    <span class="text-md font-semibold text-white">üìà Economic Output</span>
                    <span id="economic-bar-value" class="text-lg font-bold text-green-400">50</span>
                </div>
                <div class="stat-bar-bg h-3 rounded-full overflow-hidden">
                    <div id="economic-bar-fill" class="stat-bar-fill-economic h-full" style="width: 50%;"></div>
                </div>
            </div>
            
            <div>
                <div class="flex justify-between items-center mb-1">
                    <span class="text-md font-semibold text-white">ü§ù Public Trust</span>
                    <span id="social-bar-value" class="text-lg font-bold text-amber-400">50</span>
                </div>
                <div class="stat-bar-bg h-3 rounded-full overflow-hidden">
                    <div id="social-bar-fill" class="stat-bar-fill-social h-full" style="width: 50%;"></div>
                </div>
                <p class="text-xs text-red-400 mt-1">Trust must not drop to 0.</p>
            </div>
        </div>

        <!-- Dynamic Message Box -->
        <div id="message-box" class="message-box hidden p-4 mb-6 text-sm bg-blue-900 text-blue-200 rounded-lg border border-blue-700">
            <!-- Decision feedback appears here -->
        </div>

        <!-- Game Content (Decision Panel) -->
        <div id="game-content">
            <!-- Content will be injected by JavaScript -->
        </div>
    </div>

</body>
</html>